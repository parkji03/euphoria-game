var PLAYER={velocity:420,jump:-700,alive:!0,direction:"right",stop:!1,sprite:null,emote:null,deathEmote:null,keyW:null,keyA:null,keyD:null,keyE:null,keySpaceBar:null,createGameKeys:function(i){this.keyW=i.input.keyboard.addKey(Phaser.KeyCode.W),this.keyA=i.input.keyboard.addKey(Phaser.KeyCode.A),this.keyD=i.input.keyboard.addKey(Phaser.KeyCode.D),this.keyE=i.input.keyboard.addKey(Phaser.KeyCode.E),this.keySpaceBar=i.input.keyboard.addKey(Phaser.KeyCode.SPACEBAR)},createEmote:function(i){this.emote=i.add.sprite(10,10,"emoticons"),this.emote.scale.setTo(WORLD.scale);var t=this.emote;t.animations.add("exclamation",[47,46,45,44,0,1,2,45,46],78,!0).onComplete.add(function(){t.visible=!1}),t.animations.add("question",[47,46,45,44,3,4,5,45,46],78,!0).onComplete.add(function(){t.visible=!1}),t.animations.add("empty-exclamation",[6,7,8],78,!0).onComplete.add(function(){t.visible=!1}),t.animations.add("empty-question",[9,10,11],78,!0).onComplete.add(function(){t.visible=!1}),t.animations.add("sweat",[47,46,45,44,12,13,14,45,46],78,!0).onComplete.add(function(){t.visible=!1}),t.animations.add("heart",[47,46,45,44,15,16,17,45,46],78,!0).onComplete.add(function(){t.visible=!1}),t.animations.add("dotdotdot",[47,46,45,44,18,18,19,19,20,20,45,46],78,!0).onComplete.add(function(){t.visible=!1}),t.animations.add("music",[47,46,45,44,21,22,23,45,46],78,!0).onComplete.add(function(){t.visible=!1}),t.animations.add("zzz",[47,46,45,44,24,25,26,45,46],78,!0).onComplete.add(function(){t.visible=!1}),t.animations.add("scramble",[47,46,45,44,27,28,29,28,27,45,46],78,!0).onComplete.add(function(){t.visible=!1}),t.animations.add("blush",[47,46,45,44,30,31,32,45,46],78,!0).onComplete.add(function(){t.visible=!1}),t.animations.add("light-bulb",[47,46,45,44,33,34,35,45,46],78,!0).onComplete.add(function(){t.visible=!1}),t.animations.add("skull",[47,46,45,44,36,37,38,45,46],78,!0).onComplete.add(function(){t.visible=!1}),t.animations.add("angry",[47,46,45,44,39,40,41,40,39,45,46],78,!0).onComplete.add(function(){t.visible=!1}),t.animations.add("empty-sweat",[48,49,50],78,!0).onComplete.add(function(){t.visible=!1}),t.animations.add("empty-heart",[51,52,53],78,!0).onComplete.add(function(){t.visible=!1}),t.animations.add("empty-dotdotdot",[54,55,56],78,!0).onComplete.add(function(){t.visible=!1}),t.animations.add("empty-music",[57,58,59],78,!0).onComplete.add(function(){t.visible=!1}),t.animations.add("empty-zzz",[60,61,62],78,!0).onComplete.add(function(){t.visible=!1}),t.animations.add("empty-scramble",[63,64,65],78,!0).onComplete.add(function(){t.visible=!1}),t.animations.add("empty-blush",[66,67,68],78,!0).onComplete.add(function(){t.visible=!1}),t.animations.add("empty-lightbulb",[69,70,71],78,!0).onComplete.add(function(){t.visible=!1}),t.animations.add("empty-skull",[72,73,74],78,!0).onComplete.add(function(){t.visible=!1}),t.animations.add("empty-angry",[75,76,77],78,!0).onComplete.add(function(){t.visible=!1}),UI.deathCount<5?this.emote.animations.play("exclamation",8,!1):UI.deathCount<10?this.emote.animations.play("sweat",8,!1):UI.deathCount<15?this.emote.animations.play("dotdotdot",8,!1):(UI.deathCount,this.emote.animations.play("angry",8,!1)),this.emote.signal=new Phaser.Signal,this.emote.signal.add(function(i){PLAYER.emote.visible=!0,PLAYER.emote.animations.play(i,8,!1)},i)},create:function(i,t,e){this.createGameKeys(i),this.stop=!1,this.alive=!0,this.sprite=i.add.sprite(t,e,"barry"),this.sprite.scale.setTo(WORLD.scale),this.sprite.animations.add("left-fall",[35,34],47,!0).speed=10,this.sprite.animations.add("left-jump",[33,32],47,!0).speed=10,this.sprite.animations.add("right-run",[12,13,14,15,16,17,18,19],47,!0).speed=13,this.sprite.animations.add("idle",[0,1,2,3,4,5,6,7,8,9,10,11],47,!0).speed=13,this.sprite.animations.add("left-run",[27,26,25,24,23,22,21,20],47,!0).speed=13,this.sprite.animations.add("right-jump",[28,29],47,!0).speed=10,this.sprite.animations.add("right-fall",[30,31],47,!0).speed=10,this.sprite.animations.add("death",[36,37,38,39,40,41,42,43,44,45,46],47,!0).speed=13,i.physics.arcade.enable(this.sprite),this.sprite.body.collideWorldBounds=!0,i.camera.follow(this.sprite,Phaser.Camera.FOLLOW_PLATFORMER),this.sprite.checkWorldBounds=!0,this.sprite.events.onOutOfBounds.add(function(){PLAYER.death(i)},i),this.createEmote(i),this.deathEmote=i.add.sprite(this.sprite.position.x,this.sprite.position.y-30,"emoticons"),this.deathEmote.scale.setTo(3),this.deathEmote.animations.add("empty-skull",[72,73,74],78,!0).speed=2,this.deathEmote.animations.play("empty-skull"),this.deathEmote.visible=!1},update:function(i){i.physics.arcade.TILE_BIAS=40,this.sprite.body.velocity.x=0;var t=(i.physics.arcade.collide(this.sprite,WORLD.worldLayer),i.physics.arcade.collide(PLAYER.sprite,WORLD.clouds,function(i,t){i.body.touching.down&&(i.body.position.x=i.body.position.x+t.deltaX,i.body.position.y=i.body.position.y+t.deltaY)})),e=this.sprite.body.touching.down&&t||this.sprite.body.onFloor();UI.menuTriggered||this.stop||(this.keyA.isDown&&this.alive?(this.sprite.body.velocity.x=-1*this.velocity,this.sprite.animations.play("left-run")):this.keyD.isDown&&this.alive?(this.sprite.body.velocity.x=this.velocity,this.sprite.animations.play("right-run")):this.alive&&this.sprite.animations.play("idle"),this.keyW.isDown&&this.alive&&e&&(this.sprite.body.velocity.y=this.jump,this.sprite.body.velocity.y>0?this.sprite.animations.play("right-jump"):this.sprite.animations.play("left-jump")),this.sprite.body.velocity.y>0&&this.alive&&(this.sprite.body.velocity.x<0?this.sprite.animations.play("left-fall"):this.sprite.animations.play("right-fall"))),this.emote.position.x=this.sprite.position.x,this.emote.position.y=this.sprite.position.y-23,this.deathEmote.position.x=this.sprite.position.x,this.deathEmote.position.y=this.sprite.position.y-30},death:function(i){PLAYER.alive&&(UI.deathRetryText.visible=!0,PLAYER.alive=!1,UI.updateDeathCount(),this.deathEmote.visible=!0,PLAYER.sprite.animations.play("death",13,!1),PLAYER.keySpaceBar.onDown.add(function(){UI.menuTriggered||(PLAYER.sprite.kill(),i.state.restart())},i))}};