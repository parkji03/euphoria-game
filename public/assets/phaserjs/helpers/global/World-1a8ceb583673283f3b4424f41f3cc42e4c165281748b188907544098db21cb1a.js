var WORLD={width:1920,height:1080,scale:1.5,bg_scale:3.34,gravity:2e3,grass_bg_1:null,grass_bg_2:null,grass_bg_3:null,map:null,worldLayer:null,spikeLayer:null,mobBlockLayer:null,spikeID:46,clouds:null,collectibles:null,honeycombs:null,signs:null,doors:null,createPointer:function(e,o){var t=e.add.sprite(o.position.x+43,o.position.y-80,"pointer");return t.scale.setTo(1.5),t.animations.add("point",[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23],24,!0),t.animations.play("point"),t.visible=!1,t},createDoor:function(e,o,t,a,n){var i=this.doors.create(o,t,"door");i.scale.setTo(3),i.body.allowGravity=!1,i.animations.add("open",[0,1,2,3,4],5,!0).onComplete.add(function(){}),i.animations.frame=0,i.state=a,i.locked=n},updateDoorCollision:function(e){e.physics.arcade.overlap(PLAYER.sprite,WORLD.doors,function(o,t){4===t.animations.currentAnim.frame?e.time.events.add(500,function(){MUSIC.worldChooserTheme.stop(),e.state.start(t.state)}):t.locked?UI.showBottomOverlay("This door is locked."):(UI.showBottomOverlay("Press E to open the door."),PLAYER.keyE.isDown&&(PLAYER.stop=!0,PLAYER.sprite.animations.play("idle"),t.animations.play("open",8,!1)))},null,e)},createSign:function(e,o,t,a,n){var i=a.create(o,t,"sign");i.scale.setTo(1.2),i.body.allowGravity=!1,i.signText=n},updateSignCollision:function(e){e.physics.arcade.overlap(PLAYER.sprite,this.signs,function(e,o){UI.showBottomOverlay(o.signText)},null,e)},createHoneycomb:function(e,o,t,a){var n=a.create(o,t,"honeycomb");n.scale.setTo(2),e.physics.arcade.enable(n),n.body.allowGravity=!1,n.body.immovable=!0,n.origin=n.position.y,n.floatSpeed=(Math.floor(4*Math.random())+1)/10;var i=Math.floor(2*Math.random());n.floatDirection=1===i?1:-1},updateHoneycombMovement:function(e){this.honeycombs.forEach(function(e){e.position.y<e.origin-7?e.floatDirection=1:e.position.y>e.origin+7&&(e.floatDirection=-1),e.position.y+=e.floatDirection*e.floatSpeed},e)},enableHoneycombCollision:function(e){e.physics.arcade.overlap(PLAYER.sprite,this.honeycombs,function(e,o){MUSIC.collect.play(),o.kill(),UI.scoreCount++,UI.scoreText.text=UI.scoreCount.pad(3),UI.happyBarProgress.width=UI.happyBarProgressLength},null,e)},createCollectible:function(e,o,t,a){var n=a.create(o,t,"collectible");n.scale.setTo(WORLD.scale),e.physics.arcade.enable(n),n.body.allowGravity=!1,n.body.immovable=!0,n.animations.add("default",[0,1,2,3,4,5,6,7,8,9],10,!0),n.origin=n.position.y,n.floatSpeed=(Math.floor(7*Math.random())+1)/10;var i=Math.floor(2*Math.random());n.floatDirection=1===i?1:-1},enableCollectibleCollision:function(e){e.physics.arcade.overlap(PLAYER.sprite,this.collectibles,function(e,o){o.kill(),UI.happyBarProgress.width+UI.happyBarTenth>UI.happyBarProgressLength?UI.happyBarProgress.width=UI.happyBarProgressLength:UI.happyBarProgress.width+=UI.happyBarTenth},null,e)},updateCollectibleMovement:function(e){this.collectibles.forEach(function(e){e.animations.play("default"),e.position.y<e.origin-7?e.floatDirection=1:e.position.y>e.origin+7&&(e.floatDirection=-1),e.position.y+=e.floatDirection*e.floatSpeed},e)},addCloudMotion:function(e,o,t,a,n,i,l,r,s){o.tweenX=e.add.tween(o).to({x:t},n,i),o.rTweenX=e.add.tween(o).to({x:t-r},n,l),o.tweenY=e.add.tween(o).to({y:a},n,i),o.rTweenY=e.add.tween(o).to({y:a-s},n,l),o.tweenX.start(),o.tweenY.start(),o.tweenX.onComplete.add(function(){o.rTweenX.start()},e),o.rTweenX.onComplete.add(function(){o.tweenX.start()},e),o.tweenY.onComplete.add(function(){o.rTweenY.start()},e),o.rTweenY.onComplete.add(function(){o.tweenY.start()},e)},createCloud:function(e,o,t,a){var n=a.create(o,t,"cloud_platform");return n.scale.setTo(.3),n.anchor.setTo(.5),e.physics.arcade.enable(n),n.body.allowGravity=!1,n.body.immovable=!0,n},enablePhysics:function(e){e.physics.startSystem(Phaser.Physics.ARCADE),e.physics.arcade.gravity.y=this.gravity,e.physics.arcade.checkCollision.down=!1},enableSpikeCollision:function(e){this.map.setTileIndexCallback(46,function(o){"barry"===o.key&&PLAYER.death(e)},e,WORLD.worldLayer),this.map.setTileIndexCallback(47,function(o){"barry"===o.key&&PLAYER.death(e)},e,WORLD.worldLayer),this.map.setTileIndexCallback(48,function(o){"barry"===o.key&&PLAYER.death(e)},e,WORLD.worldLayer),this.map.setTileIndexCallback(49,function(o){"barry"===o.key&&PLAYER.death(e)},e,WORLD.worldLayer)},update:function(){}};